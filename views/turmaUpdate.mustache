<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Atualizar Turma</title>
  </head>
  <body>
    <h1>Atualizar Turma</h1>

    <!-- Select para selecionar a turma a ser atualizada -->
    <label for="turma-select">Selecione a turma:</label>
    <select id="turma-select">
      <option value="">Selecione uma turma</option>
      {{#turmas}}
        <option value="{{codigo}}" data-alunos_ra="{{alunos_RA}}" data-materia_codigo="{{materia_codigo}}">{{codigo}}</option>
      {{/turmas}}
    </select>

    <!-- Formulário para edição dos dados da turma -->
    <form id="turma-form" action="/api/turmas/update" method="POST">
      <label for="codigo">Código:</label>
      <input type="text" name="codigo" id="codigo" readonly>
      <br>
      <div>
        <label for="alunos_RA">Alunos RA:</label>
        <select id="alunos_RA" name="alunos_RA">
          <option selected data-default disabled selected>RA Alunos</option>
          {{#alunos}}
          <option value="{{ra}}">{{ra}}</option>
          {{/alunos}}
        </select>
      </div>
      <div>
        <label for="materia_codigo">Código da Matéria:</label>
        <select id="materia_codigo" name="materia_codigo">
          <option selected data-default disabled selected>Código da Matéria</option>
          {{#materias}}
          <option value="{{codigo}}">{{codigo}}</option>
          {{/materias}}
        </select>
      </div>
      <br>
      <input type="submit" value="Atualizar">
    </form>

    <br><a href="/">Página Inicial</a>

    <script>
      // Função para atualizar os campos de entrada (inputs) com os dados da turma selecionada
      function atualizarDadosTurma() {
        const select = document.getElementById("turma-select");
        const turmaSelecionada = select.options[select.selectedIndex];

        document.getElementById("codigo").value = turmaSelecionada.value;
        document.getElementById("alunos_RA").value = turmaSelecionada.dataset.alunos_ra;
        document.getElementById("materia_codigo").value = turmaSelecionada.dataset.materia_codigo;
      }

      // Event listener para acionar a função de atualização dos campos quando a turma selecionada mudar
      const select = document.getElementById("turma-select");
      select.addEventListener("change", atualizarDadosTurma);
    </script>

  </body>
</html>
